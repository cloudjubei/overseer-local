/* Screens: Board (Kanban) */
/* Viewport: horizontal scroll container following Linear/Monday patterns */
.board-viewport {
  position: relative;
  overflow-x: auto;
  overflow-y: hidden;
  min-height: 0;
  height: 100%;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-x: contain;
  scroll-snap-type: x proximity;
}
.board-viewport:focus {
  outline: none;
}
/* Edge gradient hints when scrollable */
.board-viewport::before,
.board-viewport::after {
  content: '';
  position: sticky;
  top: 0;
  bottom: 0;
  width: 20px;
  pointer-events: none;
  z-index: 2;
  opacity: 0;
  transition: opacity var(--motion-fast, 120ms) var(--easing-standard, ease);
}
.board-viewport::before {
  left: 0;
  background: linear-gradient(to right, var(--surface-base), transparent);
}
.board-viewport::after {
  float: right;
  right: 0;
  background: linear-gradient(to left, var(--surface-base), transparent);
}
.board-viewport.is-scroll-left::before {
  opacity: 1;
}
.board-viewport.is-scroll-right::after {
  opacity: 1;
}

/* Nav buttons for horizontal scroll */
.board-nav {
  position: sticky;
  top: 50%;
  transform: translateY(-50%);
  z-index: 3;
  background: var(--surface-overlay);
  color: var(--text-primary);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-round, 9999px);
  width: 28px;
  height: 28px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-1);
  opacity: 0.92;
}
.board-nav:hover {
  box-shadow: var(--shadow-2);
}
.board-nav--left {
  left: 8px;
}
.board-nav--right {
  float: right;
  right: 8px;
}

/* Board grid uses auto-flow columns so it can overflow horizontally */
.board {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: clamp(260px, 28vw, 360px);
  gap: var(--space-4, 12px);
  padding: var(--space-4, 12px);
  align-items: start;
}

/* Column: make it its own vertical scroll container with sticky header */
.board-col {
  background: var(--surface-raised);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-3);
  box-shadow: var(--shadow-0);
  display: flex;
  flex-direction: column;
  min-height: 220px;
  max-height: 100%;
  overflow-y: auto;
  scroll-snap-align: start;
  transition:
    box-shadow var(--motion-fast, 120ms) var(--easing-standard, ease),
    transform var(--motion-fast, 120ms) var(--easing-standard, ease),
    border-color var(--motion-fast, 120ms) var(--easing-standard, ease);
}
.board-col__header {
  position: sticky;
  top: 0;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 10px;
  border-bottom: 1px solid var(--border-subtle);
  font-weight: var(--fw-semibold, 600);
  font-size: var(--fs-sm, 14px);
}
.board-col__title {
  color: var(--text-primary);
}
.board-col__count {
  color: var(--text-secondary);
  font-size: var(--fs-xs, 12px);
}
.board-col__body {
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: relative;
  min-height: 160px;
}

/* Colorful headers by status (soft tints inspired by Monday) */
.header-done {
  background: var(--status-done-soft-bg);
  color: var(--status-done-soft-fg);
  border-bottom-color: var(--status-done-soft-border);
}
.header-inprogress {
  background: var(--status-working-soft-bg);
  color: var(--status-working-soft-fg);
  border-bottom-color: var(--status-working-soft-border);
}
.header-pending {
  background: var(--status-queued-soft-bg);
  color: var(--status-queued-soft-fg);
  border-bottom-color: var(--status-queued-soft-border);
}
.header-blocked {
  background: color-mix(in srgb, var(--status-blocked-bg) 14%, transparent);
  color: var(--status-blocked-fg);
  border-bottom-color: color-mix(in srgb, var(--status-blocked-bg) 55%, transparent);
}
.header-deferred {
  background: var(--status-on_hold-soft-bg);
  color: var(--status-on_hold-soft-fg);
  border-bottom-color: var(--status-on_hold-soft-border);
}

/* Drag-over animations */
.board-col.drag-over {
  border-color: var(--border-focus);
  box-shadow: 0 0 0 var(--focus-ring-width) color-mix(in srgb, var(--focus-ring) 35%, transparent);
  transform: translateY(-2px);
}
.board-col.drag-over .board-col__header {
  filter: saturate(1.05) brightness(1.02);
}
.board-col.drag-over .board-col__body::after {
  content: 'Drop here';
  position: absolute;
  inset: 6px;
  border: 2px dashed var(--border-focus);
  border-radius: var(--radius-3);
  pointer-events: none;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--fs-xs, 12px);
  background: color-mix(in srgb, var(--surface-raised) 86%, var(--focus-ring) 14%);
  animation: boardPulse var(--motion-normal, 180ms) var(--easing-decelerate, ease-out) 1;
}
@keyframes boardPulse {
  from {
    transform: scale(0.98);
    opacity: 0.8;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

/* Status-colored subtle side accents */
.board-col--status-done {
  box-shadow: inset 3px 0 0 0 var(--status-done-soft-border);
}
.board-col--status-inprogress {
  box-shadow: inset 3px 0 0 0 var(--status-working-soft-border);
}
.board-col--status-pending {
  box-shadow: inset 3px 0 0 0 var(--status-queued-soft-border);
}
.board-col--status-blocked {
  box-shadow: inset 3px 0 0 0 color-mix(in srgb, var(--status-blocked-bg) 55%, transparent);
}
.board-col--status-deferred {
  box-shadow: inset 3px 0 0 0 var(--status-on_hold-soft-border);
}
